{{#*inline "soundLayerPartial"}}
    <div class="crossblade-sound-layer" data-layer="{{index}}">
        <h4>
            ðŸ”Š{{ localize "CROSSBLADE.Sound.Layer.Header" }}
            <a class="crossblade-layer-control delete-layer" title="{{localize 'CROSSBLADE.Sound.Layer.Remove'}}">
                <i class="fas fa-minus"></i>
            </a>
        </h4>

        <div class="form-group">
            <label>{{ localize "CROSSBLADE.Sound.Layer.SoundSrc" }}</label>
            <div class="form-fields">
                {{filePicker target=(concat "flags.crossblade.soundLayers." index ".src") type="audio"}}
                <input class="audio crossblade-layer-src" type="text" name="flags.crossblade.soundLayers.{{index}}.src" placeholder="path/audio.mp3" value="{{src}}"/>
            </div>
        </div>
        <div class="form-group row">
            <label>{{localize "CROSSBLADE.Sound.Layer.EventTrigger"}}</label>
            <div class="crossblade-events">
            {{#each crossbladeEvents}}
                <div class='form-check form-check-inline' title='{{localize this.description}}'>
                <input class='form-check-input' type='checkbox' id='crossblade_soundLayers_{{../index}}_events_{{@key}}' name='flags.crossblade.soundLayers.{{../index}}.events' value='{{@key}}' {{checked (inArray (getProperty ../this 'events') @key) }} />
                <label class='form-check-label' for='crossblade_soundLayers_{{../index}}_events_{{@key}}'>{{localize this.label}}</label>
                </div>
            {{/each}}
            </div>
        </div>
    </div>
{{/inline}}

<form autocomplete="off">
    <h4>
        Sound Layers
        <a class="crossblade-layer-control add-layer" title="{{localize 'CROSSBLADE.Sound.Layer.Add'}}">
            <i class="fas fa-plus"></i>
        </a>
    </h4>
    <div id="soundLayers">
        {{#each data.flags.crossblade.soundLayers}}
            {{> soundLayerPartial index=@index crossbladeEvents=../crossbladeEvents}}
        {{/each}}
    </div>
    <button type="submit" name="submit">
        <i class="fas fa-file-audio"></i> {{ localize "CROSSBLADE.Layers.Update" }}
    </button>
</form>
