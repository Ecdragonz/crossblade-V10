{"_id":"Bc1OyV9UEJzYdE8I","name":"Set Custom Event (Radios, Playing Sounds)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Displays a prompt allowing the user to select the custom event from a list of values. Updates are sent as soon as the value changes, allowing the GM to keep the prompt open for quick and precise control of custom events.\n// Options are populated dynamically from currently playing Crossblade sounds in the world.\n\nconst module = game.modules.get('crossblade');\nconst options = ['', ...module.api.getPlayingCustomEvents()];\nconst radios = options\n  .map((option) => {\n    const id = randomID();\n    return `<label style=\"font-size: 16px\" class=\"checkbox\" for=\"cbEvent_${id}\"><input id=\"cbEvent_${id}\" name=\"customEvent\" type=\"radio\" value=\"${option}\" ${\n      module.api.getCustomEvent() === option ? ' checked=\"checked\"' : ''\n    } /> ${option ? option : '[Clear]'}</label>`;\n  })\n  .join('<br>\\n');\n\nnew Dialog({\n  title: 'Set Custom Event',\n  content: `<div class=\"form-group\" style=\"margin-bottom: 1em\"><div class=\"form-fields\">${radios}</div></div>`,\n  buttons: {\n    close: {\n      icon: '<i class=\"fas fa-times\"></i>',\n      label: 'Close',\n    },\n  },\n  default: 'close',\n  render: (html) =>\n    html\n      .find('input[name=\"customEvent\"]')\n      .on('change', (event) => module.api.setCustomEvent(event.target.value)),\n}, { width: 0 }).render(true);","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.mdP01h3266iwLvsk"}}}
{"_id":"EMGeCEx1eu8yHwpV","name":"Set Custom Event (Radios, Manual Options)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Displays a prompt to select the custom event from a list of values. Updates are sent as soon as the value changes, allowing the GM to keep the prompt open for quick and precise control of custom events.\n// Edit the \"options\" constant to modify the list of events.\n\nconst options = ['', 'Ambient', 'Dynamic', 'Dangerous'];\nconst module = game.modules.get('crossblade');\nconst radios = options\n  .map((option) => {\n    const id = randomID();\n    return `<label style=\"font-size: 16px\" class=\"checkbox\" for=\"cbEvent_${id}\"><input id=\"cbEvent_${id}\" name=\"customEvent\" type=\"radio\" value=\"${option}\" ${\n      module.api.getCustomEvent() === option ? ' checked=\"checked\"' : ''\n    } /> ${option ? option : '[Clear]'}</label>`;\n  })\n  .join('<br>\\n');\n\nnew Dialog({\n  title: 'Set Custom Event',\n  content: `<div class=\"form-group\" style=\"margin-bottom: 1em\"><div class=\"form-fields\">${radios}</div></div>`,\n  buttons: {\n    close: {\n      icon: '<i class=\"fas fa-times\"></i>',\n      label: 'Close',\n    },\n  },\n  default: 'close',\n  render: (html) =>\n    html\n      .find('input[name=\"customEvent\"]')\n      .on('change', (event) => module.api.setCustomEvent(event.target.value)),\n}, { width: 0 }).render(true);","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.K06SEB8XrVPXwZCn"}}}
{"_id":"Nw43jt6Xerf3y4ox","name":"Set Custom Event (Select, Manual Options)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Displays a prompt allowing the user to select the custom event from a list of values.\n// Edit the \"options\" constant to modify the list of events.\n\nconst options = ['', 'Ambient', 'Dynamic', 'Dangerous'];\nconst select = $('<select style=\"width:100%; margin-bottom:1em\" name=\"customEvent\"></select>');\nconst module = game.modules.get('crossblade');\nselect.append(options.map((option) => `<option value=\"${option}\" ${module.api.getCustomEvent() === option ? ' selected' : ''}>${option ? option : ''}</option>`));\n\nnew Dialog({\n  title: 'Set Custom Event',\n  content: select.get(0).outerHTML,\n  buttons: {\n  ok: {\n   icon: '<i class=\"fas fa-check\"></i>',\n   label: 'OK',\n   callback: (html) => module.api.setCustomEvent($(html).find('select[name=customEvent]').val())\n  },\n  cancel: {\n   icon: '<i class=\"fas fa-cancel\"></i>',\n   label: 'Cancel',\n  }\n },\n default: 'ok',\n}, { width: 200 }).render(true);","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.qovimkQZYo72qyLz"}}}
{"_id":"PaIdH8jyV0fooNEA","name":"Set Custom Event (Input)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Displays a prompt to input any custom event\nnew Dialog({\n title: 'Set Custom Event',\n content: '<input style=\"margin-bottom: 1em\" type=\"text\" name=\"customEvent\" />',\n buttons: {\n  ok: {\n   icon: '<i class=\"fas fa-check\"></i>',\n   label: 'OK',\n   callback: (html) => game.modules.get('crossblade').api.setCustomEvent($(html).find('input[name=customEvent]').val())\n  },\n  cancel: {\n   icon: '<i class=\"fas fa-cancel\"></i>',\n   label: 'Cancel',\n  }\n },\n default: 'ok',\n render: (html) => html.find('input[name=\"customEvent\"]').trigger('select'),\n}, { width: 200 }).render(true);","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.o8DdwWJJiuYY6d58"}}}
{"_id":"QUwP3uWTPPvUgSQR","name":"Set Custom Event (Specific, No Prompt)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Sets the custom event to a specific value\n// Edit 'Dangerous' to your preferred event\ngame.modules.get('crossblade').api.setCustomEvent('Dangerous');","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.o8DdwWJJiuYY6d58"}}}
{"_id":"cunNy5USEU0kPBaX","name":"Set Custom Event (Radios, All Sounds)","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Displays a prompt to select the custom event from a list of values. Updates are sent as soon as the value changes, allowing the GM to keep the prompt open for quick and precise control of custom events.\n// Options are populated dynamically from all Crossblade sounds in the world.\n\nconst module = game.modules.get('crossblade');\nconst options = ['', ...module.api.getAllCustomEvents({sort:true})];\nconst radios = options\n  .map((option) => {\n    const id = randomID();\n    return `<label style=\"font-size: 16px\" class=\"checkbox\" for=\"cbEvent_${id}\"><input id=\"cbEvent_${id}\" name=\"customEvent\" type=\"radio\" value=\"${option}\" ${\n      module.api.getCustomEvent() === option ? ' checked=\"checked\"' : ''\n    } /> ${option ? option : '[Clear]'}</label>`;\n  })\n  .join('<br>\\n');\n\nnew Dialog({\n  title: 'Set Custom Event',\n  content: `<div class=\"form-group\" style=\"margin-bottom: 1em\"><div class=\"form-fields\">${radios}</div></div>`,\n  buttons: {\n    close: {\n      icon: '<i class=\"fas fa-times\"></i>',\n      label: 'Close',\n    },\n  },\n  default: 'close',\n  render: (html) =>\n    html\n      .find('input[name=\"customEvent\"]')\n      .on('change', (event) => module.api.setCustomEvent(event.target.value)),\n}, { width: 0 }).render(true);","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.mdP01h3266iwLvsk"}}}
{"_id":"sFSlvuv8IcQm4aWX","name":"Clear Custom Event","type":"script","author":"ZZ5JpTjp3RfNzcUy","img":"modules/crossblade/assets/crossed-swords.svg","scope":"global","command":"// Clears the custom event\ngame.modules.get('crossblade').api.setCustomEvent();","folder":null,"sort":0,"permission":{"default":0,"ZZ5JpTjp3RfNzcUy":3},"flags":{"core":{"sourceId":"Macro.o8DdwWJJiuYY6d58"}}}
